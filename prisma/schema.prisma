generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model GoFastCompany {
  id        String     @id
  name      String
  slug      String     @unique
  address   String?
  city      String?
  state     String?
  zip       String?
  domain    String?
  createdAt DateTime   @default(now())
  updatedAt DateTime
  athletes  athletes[]
}

model athletes {
  id                  String                @id
  firebaseId          String                @unique
  email               String?
  companyId           String
  firstName           String?
  lastName            String?
  gofastHandle        String?               @unique
  photoURL            String?
  phoneNumber         String?
  birthday            DateTime?
  gender              String?
  city                String?
  state               String?
  primarySport        String?
  bio                 String?
  instagram           String?
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  GoFastCompany       GoFastCompany         @relation(fields: [companyId], references: [id])
  attendance_records  attendance_records[]
  effort_records      effort_records[]
  self_report_entries self_report_entries[]
  weekly_reflections  weekly_reflections[]
}

model attendance_records {
  id        String           @id
  athleteId String
  aoId      String
  date      DateTime
  source    AttendanceSource
  createdAt DateTime         @default(now())
  updatedAt DateTime
  athletes  athletes         @relation(fields: [athleteId], references: [id], onDelete: Cascade)
}

model effort_records {
  id          String   @id
  athleteId   String
  date        DateTime
  calories    Int
  durationSec Int
  calPerMin   Float
  createdAt   DateTime @default(now())
  updatedAt   DateTime
  athletes    athletes @relation(fields: [athleteId], references: [id], onDelete: Cascade)
}

model self_report_entries {
  id        String             @id
  athleteId String
  date      DateTime           @default(now())
  category  SelfReportCategory
  note      String?
  createdAt DateTime           @default(now())
  updatedAt DateTime
  athletes  athletes           @relation(fields: [athleteId], references: [id], onDelete: Cascade)
}

model weekly_reflections {
  id        String   @id
  athleteId String
  date      DateTime @default(now())
  mood      String?
  wins      String?
  struggles String?
  intention String?
  createdAt DateTime @default(now())
  updatedAt DateTime
  athletes  athletes @relation(fields: [athleteId], references: [id], onDelete: Cascade)
}

enum AttendanceSource {
  BACKBLAST
  SELF
}

enum SelfReportCategory {
  FELLOWSHIP
  SERVICE
  MARRIAGE_FAMILY
  DIET_QUEEN
  MENTAL_HEALTH
  SPIRITUAL
}
